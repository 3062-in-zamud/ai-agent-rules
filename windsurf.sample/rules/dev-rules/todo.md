---
trigger: always_on
---

---
description: Task management rules (project‑wide)
globs:
  - "**/*"
alwaysApply: true
ruleType: Always
---

まず、このファイルを参照したら、「**`##### TODOルール確認完了！ #####`**」と発言すること

# TODO / タスク管理ルール v1.0

> **目的** — 実装計画 (`implementation_plans/`)・進捗ログとの 3 点セットで
> **「計画 → 実行 → 完了」** の流れを一元管理する。

---

## 1. 管理ファイル

| ファイル | 役割 | 生成タイミング |
|----------|------|---------------|
| `implementation_plans/YYYYMMDD_<title>/<title>.md` | 実装計画書 | **着手前** |
| `implementation_plans/YYYYMMDD_<title>/YYYYMMDD_progress_XX.md` | 進捗ログ | **作業中** |
| **`@todo.md`** (ルート直下) | 全タスク一覧 | **常時更新** |

> **NOTE** — 計画書とログの粒度は「機能単位」
> `@todo.md` は **全機能横断** で見るダッシュボードとする。

---

## 2. `@todo.md` の書式

```markdown
## 🔴 2025‑05 スプリント

- [~] API エラーハンドリング改善             <!-- 進行中 -->
  - OpenAPI の error schema を統一
  - impl‑plan: implementation_plans/20250501_error_refactor/
  - ⏳ 6 h
- [ ] 画像アップロードの S3 署名 URL 導入      <!-- 未着手 -->
  - 依存: IAM ロール整理 (#42)
  - impl‑plan: implementation_plans/20250503_presigned_url/
  - ⏳ 4 h
- [!] Lighthouse パフォーマンス < 80          <!-- 問題あり -->
  - investigation log: implementation_plans/20250428_perf/logs/20250502_progress_03.md
  - 要追加調査
- [x] Tailwind 4.0 へアップグレード           <!-- 完了 -->
  - PR #128 merged
```

### 記号 / ステータス

| マーク | 意味 |
|-------|------|
| `[ ]` | **未着手** |
| `[~]` | **進行中** |
| `[x]` | **完了** |
| `[!]` | **問題あり / ブロッカー** |

### 優先度

| 絵文字 | 優先度 |
|-------|--------|
| 🔴 | 緊急 |
| 🟡 | 重要 |
| 🟢 | 通常 |
| ⚪ | 低 |

---

## 3. 更新フロー

1. **タスク追加**
   - 新 Issue / 不具合 / リファクタ提案が発生したら `@todo.md` に追記。
   - 可能なら **`impl‑plan` ディレクトリへのリンク** も同時に書く（未作成なら後追い可）。

2. **タスク着手**
   - ステータスを `[ ]` → `[~]` に変更。
   - 対応する `implementation_plans/YYYYMMDD_<title>/` を作成し、計画書を書き始める。

3. **進捗記録**
   - 作業日ごとに `YYYYMMDD_progress_NN.md` を追加。
   - `@todo.md` の行末に **最新ログへの相対パス** を追記しても良い。

4. **問題発生**
   - ステータス `[!]` に変更し、原因・暫定対応をタスク下のサブリストへ記載。
   - 必要に応じて新タスクへ分割。

5. **タスク完了**
   - 実装・テスト・レビューが終わったら `[x]` に変更。
   - 完了確認は計画書の **Definition of Done** を満たすかで判断。

---

## 4. 定期レビュー

| タイミング | 内容 |
|-----------|------|
| **日次** | 進行タスクのステータス更新・ブロッカー把握 |
| **週次** | 完了タスク確認・未完了タスクの再優先度付け |
| **月次** | マイルストーン達成度レビュー・プロセス改善点抽出 |

---

## 5. 重要事項

1. **毎 PR / merge 後に `@todo.md` を必ず更新**
2. **私が言わなくても常時最新化すること** — 未更新で漏れが出ると *あなたの責任* ⚠️
3. 機能追加は歓迎だが、**小さく刻み MVP 思考** で。
4. `@todo.md` の肥大化を避けるため、**完了済セクションは月次でアーカイブ** しても良い。

---
